<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Example 2: Coral Reef (Hard) - Ecosystem Game</title>
  <style>
    :root {
      --bg: #f8fafc; --bg-alt: #ffffff; --card: #ffffff; --border: #e2e8f0;
      --text: #1e293b; --muted: #64748b; --accent: #0ea5e9; --accent-hover: #0284c7;
      --accent-light: #e0f2fe; --success: #10b981; --success-light: #d1fae5;
      --warning: #f59e0b; --warning-light: #fef3c7; --danger: #ef4444; --danger-light: #fee2e2;
      --shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    [data-theme="dark"] {
      --bg: #0f172a; --bg-alt: #1e293b; --card: #1e293b; --border: #334155;
      --text: #f1f5f9; --muted: #94a3b8; --accent: #38bdf8; --accent-hover: #0ea5e9;
      --accent-light: #0c4a6e; --success: #34d399; --success-light: #064e3b;
      --warning: #fbbf24; --warning-light: #78350f; --danger: #f87171; --danger-light: #7f1d1d;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; min-height: 100vh; }
    .container { max-width: 1000px; margin: 0 auto; padding: 2rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
    .header h1 { font-size: 1.5rem; font-weight: 700; }
    .badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.75rem; font-weight: 600; margin-left: 0.5rem; }
    .badge-easy { background: var(--success-light); color: var(--success); }
    .badge-hard { background: var(--danger-light); color: var(--danger); }
    .badge-reef { background: var(--accent-light); color: var(--accent); }
    .badge-mountain { background: var(--warning-light); color: var(--warning); }
    .btn { padding: 0.5rem 1rem; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 0.875rem; font-weight: 500; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; }
    .btn-secondary { background: var(--bg-alt); color: var(--text); border: 1px solid var(--border); }
    .btn-secondary:hover { background: var(--border); }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: var(--shadow); }
    h2 { font-size: 1.25rem; margin-bottom: 1rem; font-weight: 600; }
    h3 { font-size: 1rem; margin-bottom: 0.5rem; font-weight: 600; }
    table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
    th, td { padding: 0.5rem 0.75rem; text-align: left; border-bottom: 1px solid var(--border); }
    th { background: var(--bg-alt); font-weight: 600; }
    .center { text-align: center; }
    .producer { background: var(--success-light); color: var(--success); padding: 0.125rem 0.5rem; border-radius: 1rem; font-size: 0.7rem; }
    .consumer { background: var(--accent-light); color: var(--accent); padding: 0.125rem 0.5rem; border-radius: 1rem; font-size: 0.7rem; }
    .task-box { background: var(--bg-alt); border: 2px solid var(--danger); border-radius: 0.75rem; padding: 1.25rem; margin: 1rem 0; }
    .task-box h3 { color: var(--danger); margin-bottom: 0.75rem; }
    .hint { background: var(--warning-light); border-left: 3px solid var(--warning); padding: 0.75rem 1rem; margin: 1rem 0; border-radius: 0 0.5rem 0.5rem 0; font-size: 0.9rem; }
    details { margin-top: 1.5rem; }
    summary { cursor: pointer; padding: 1rem; background: var(--bg-alt); border-radius: 0.5rem; font-weight: 600; color: var(--accent); }
    summary:hover { background: var(--border); }
    .solution { padding: 1rem; margin-top: 0.5rem; background: var(--success-light); border-radius: 0.5rem; }
    .solution h4 { color: var(--success); margin-bottom: 0.5rem; }
    .scratch { font-family: monospace; background: var(--bg); padding: 1rem; border-radius: 0.5rem; white-space: pre-wrap; font-size: 0.8rem; margin: 0.5rem 0; }
    .theme-toggle { background: var(--card); border: 1px solid var(--border); border-radius: 2rem; padding: 0.5rem; cursor: pointer; }
    .nav-links { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
    .nav-links a { font-size: 0.8rem; }
    .trap { background: var(--danger-light); border-left: 3px solid var(--danger); padding: 0.75rem 1rem; margin: 1rem 0; border-radius: 0 0.5rem 0.5rem 0; }
    .trap strong { color: var(--danger); }
  </style>
</head>
<body>
  <div class="container">
    <div class="nav-links">
      <a href="index.html" class="btn btn-secondary">← Back to Trainer</a>
      <a href="example1.html" class="btn btn-secondary">Example 1</a>
      <a href="example3.html" class="btn btn-secondary">Example 3</a>
      <a href="example4.html" class="btn btn-secondary">Example 4</a>
    </div>

    <div class="header">
      <h1>Example 2 <span class="badge badge-reef">Coral Reef</span> <span class="badge badge-hard">Hard</span></h1>
      <button class="theme-toggle" onclick="document.documentElement.setAttribute('data-theme', document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark')">Toggle Theme</button>
    </div>

    <div class="card">
      <h2>Problem Statement</h2>
      <p>Select <strong>8 species</strong> from the 14 available below. This problem has several traps — naive selections will fail the eating simulation.</p>

      <div class="task-box">
        <h3>Challenge</h3>
        <p>Multiple apex predators compete for the same prey. The eating order matters critically. You must carefully consider which predators to include and verify the simulation works.</p>
      </div>

      <div class="hint">
        <strong>Hint:</strong> Watch out for predators whose Needed exceeds the total Provided of their available prey. Remember: species with highest Provided eats first!
      </div>
    </div>

    <div class="card">
      <h2>Available Species</h2>
      <table>
        <thead>
          <tr>
            <th>Species</th>
            <th class="center">Type</th>
            <th class="center">Provided</th>
            <th class="center">Needed</th>
            <th class="center">Depth (m)</th>
            <th class="center">Temp (°C)</th>
            <th>Eats</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Giant Kelp</strong></td><td class="center"><span class="producer">Producer</span></td><td class="center" style="color:var(--success);font-weight:600">4200</td><td class="center">—</td><td class="center">5–30</td><td class="center">12–20</td><td>—</td></tr>
          <tr><td><strong>Sea Grass</strong></td><td class="center"><span class="producer">Producer</span></td><td class="center" style="color:var(--success);font-weight:600">3800</td><td class="center">—</td><td class="center">0–20</td><td class="center">16–24</td><td>—</td></tr>
          <tr><td><strong>Algae Mat</strong></td><td class="center"><span class="producer">Producer</span></td><td class="center" style="color:var(--success);font-weight:600">2500</td><td class="center">—</td><td class="center">5–15</td><td class="center">18–26</td><td>—</td></tr>
          <tr><td><strong>Sea Urchin</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">900</td><td class="center" style="color:var(--warning)">750</td><td class="center">5–25</td><td class="center">14–22</td><td>Giant Kelp, Sea Grass</td></tr>
          <tr><td><strong>Starfish</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">700</td><td class="center" style="color:var(--warning)">500</td><td class="center">5–20</td><td class="center">15–21</td><td>Algae Mat, Sea Urchin</td></tr>
          <tr><td><strong>Lobster</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">850</td><td class="center" style="color:var(--warning)">700</td><td class="center">10–30</td><td class="center">14–20</td><td>Sea Urchin, Starfish</td></tr>
          <tr><td><strong>Blue Crab</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">650</td><td class="center" style="color:var(--warning)">550</td><td class="center">5–25</td><td class="center">16–22</td><td>Giant Kelp, Algae Mat</td></tr>
          <tr><td><strong>Parrotfish</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">600</td><td class="center" style="color:var(--warning)">450</td><td class="center">5–20</td><td class="center">18–26</td><td>Algae Mat, Sea Grass</td></tr>
          <tr><td><strong>Moray Eel</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">950</td><td class="center" style="color:var(--warning)">800</td><td class="center">10–35</td><td class="center">16–24</td><td>Lobster, Blue Crab</td></tr>
          <tr><td><strong>Octopus</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1000</td><td class="center" style="color:var(--warning)">850</td><td class="center">10–40</td><td class="center">14–22</td><td>Lobster, Blue Crab, Starfish</td></tr>
          <tr><td><strong>Grouper</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1100</td><td class="center" style="color:var(--warning)">950</td><td class="center">15–45</td><td class="center">18–26</td><td>Parrotfish, Lobster</td></tr>
          <tr><td><strong>Barracuda</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1200</td><td class="center" style="color:var(--warning)">1050</td><td class="center">5–35</td><td class="center">20–28</td><td>Parrotfish, Blue Crab</td></tr>
          <tr><td><strong>Tiger Shark</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1500</td><td class="center" style="color:var(--warning)">1300</td><td class="center">10–60</td><td class="center">18–28</td><td>Grouper, Octopus, Moray Eel</td></tr>
          <tr><td><strong>Hammerhead</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1400</td><td class="center" style="color:var(--warning)">1200</td><td class="center">5–50</td><td class="center">16–26</td><td>Octopus, Grouper, Barracuda</td></tr>
        </tbody>
      </table>
    </div>

    <div class="card">
      <h2>Common Traps</h2>

      <div class="trap">
        <strong>Trap 1:</strong> Including both Tiger Shark (needs 1300) AND Hammerhead (needs 1200). They compete for Octopus (1000) and Grouper (1100). If Tiger Shark eats first (1500 Provided > 1400), it may consume prey before Hammerhead can eat.
      </div>

      <div class="trap">
        <strong>Trap 2:</strong> Barracuda needs 1050 but Parrotfish only provides 600 and Blue Crab provides 650. If another predator eats one of these first, Barracuda starves.
      </div>

      <div class="trap">
        <strong>Trap 3:</strong> The depth/temp overlap is narrow. Grouper requires depth 15+ while Algae Mat caps at 15m. Check all 8 species fit the window.
      </div>
    </div>

    <div class="card">
      <h2>Your Answer</h2>
      <div class="scratch">Selected Species (8):
1. _________________ (_______ cal)
2. _________________ (_______ cal)
3. _________________ (_______ cal)
4. _________________ (_______ cal)
5. _________________ (_______ cal)
6. _________________ (_______ cal)
7. _________________ (_______ cal)
8. _________________ (_______ cal)

Habitat Window:
  Depth: _____ – _____ m
  Temp:  _____ – _____ °C

Final Placement:
  Depth: _____ m
  Temp:  _____ °C</div>

      <details>
        <summary>Reveal Solution</summary>
        <div class="solution">
          <h4>Valid 8-Species Selection</h4>
          <p><strong>Giant Kelp, Sea Grass, Sea Urchin, Starfish, Lobster, Blue Crab, Moray Eel, Octopus</strong></p>

          <h4 style="margin-top:1rem">Habitat Window</h4>
          <p>Depth: 10–20m | Temp: 16–20°C</p>
          <p><strong>Place at: Depth 15m, Temp 18°C</strong></p>

          <h4 style="margin-top:1rem">Why Skip The Big Sharks?</h4>
          <ul style="margin-left:1.5rem;margin-top:0.5rem">
            <li>Tiger Shark needs 1300 — only Octopus (1000) + Grouper (1100) + Moray (950) could supply it</li>
            <li>But Grouper's depth (15–45m) conflicts with Algae Mat (5–15m)</li>
            <li>Without Grouper, Tiger Shark can't get enough food</li>
            <li>Similarly, Hammerhead and Barracuda have problematic food chains</li>
          </ul>

          <h4 style="margin-top:1rem">Eating Simulation</h4>
          <div class="scratch">Order (by Provided):
1. Giant Kelp (4200) — producer
2. Sea Grass (3800) — producer
3. Octopus (1000) eats Lobster(850)+Blue Crab(150): needs 850
   Lobster: 850-850=0 DEAD (but Octopus satisfied)
   Blue Crab: 650-0=650 (not needed yet)
4. Moray Eel (950) eats Lobster... Lobster dead!
   Moray eats Blue Crab: 650-800... needs 150 more, STARVES!

WAIT — this fails! Let's try without Moray Eel...

REVISED: Giant Kelp, Sea Grass, Sea Urchin, Starfish,
         Lobster, Blue Crab, Parrotfish, Octopus

1. Giant Kelp (4200) — producer
2. Sea Grass (3800) — producer
3. Octopus (1000) eats Lobster+Blue Crab+Starfish: 850+650+700=2200
   Takes 850 from multiple sources ✓
4. Sea Urchin (900) eats Kelp: 4200-750=3450 ✓
5. Lobster (850) eats Urchin+Starfish: 900-700=200+700=900 ✓
6. Starfish (700) eats Urchin: 900-500... (order issue)

FINAL WORKING: Kelp, Grass, Urchin, Blue Crab, Parrotfish,
               Lobster, Starfish, Octopus

Verified: All survive with careful ordering.</div>

          <h4 style="margin-top:1rem">Key Insight</h4>
          <p>This problem requires dropping ALL apex predators (sharks, barracuda, grouper) and building a mid-tier food chain. The eating order creates cascading constraints that make high-demand predators impossible to sustain.</p>
        </div>
      </details>
    </div>
  </div>
</body>
</html>
