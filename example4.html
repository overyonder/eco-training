<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Example 4: Mountain (Hard) - Ecosystem Game</title>
  <style>
    :root {
      --bg: #f8fafc; --bg-alt: #ffffff; --card: #ffffff; --border: #e2e8f0;
      --text: #1e293b; --muted: #64748b; --accent: #0ea5e9; --accent-hover: #0284c7;
      --accent-light: #e0f2fe; --success: #10b981; --success-light: #d1fae5;
      --warning: #f59e0b; --warning-light: #fef3c7; --danger: #ef4444; --danger-light: #fee2e2;
      --shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    [data-theme="dark"] {
      --bg: #0f172a; --bg-alt: #1e293b; --card: #1e293b; --border: #334155;
      --text: #f1f5f9; --muted: #94a3b8; --accent: #38bdf8; --accent-hover: #0ea5e9;
      --accent-light: #0c4a6e; --success: #34d399; --success-light: #064e3b;
      --warning: #fbbf24; --warning-light: #78350f; --danger: #f87171; --danger-light: #7f1d1d;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; min-height: 100vh; }
    .container { max-width: 1000px; margin: 0 auto; padding: 2rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
    .header h1 { font-size: 1.5rem; font-weight: 700; }
    .badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.75rem; font-weight: 600; margin-left: 0.5rem; }
    .badge-easy { background: var(--success-light); color: var(--success); }
    .badge-hard { background: var(--danger-light); color: var(--danger); }
    .badge-reef { background: var(--accent-light); color: var(--accent); }
    .badge-mountain { background: var(--warning-light); color: var(--warning); }
    .btn { padding: 0.5rem 1rem; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 0.875rem; font-weight: 500; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; }
    .btn-secondary { background: var(--bg-alt); color: var(--text); border: 1px solid var(--border); }
    .btn-secondary:hover { background: var(--border); }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: var(--shadow); }
    h2 { font-size: 1.25rem; margin-bottom: 1rem; font-weight: 600; }
    h3 { font-size: 1rem; margin-bottom: 0.5rem; font-weight: 600; }
    table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
    th, td { padding: 0.5rem 0.75rem; text-align: left; border-bottom: 1px solid var(--border); }
    th { background: var(--bg-alt); font-weight: 600; }
    .center { text-align: center; }
    .producer { background: var(--success-light); color: var(--success); padding: 0.125rem 0.5rem; border-radius: 1rem; font-size: 0.7rem; }
    .consumer { background: var(--accent-light); color: var(--accent); padding: 0.125rem 0.5rem; border-radius: 1rem; font-size: 0.7rem; }
    .task-box { background: var(--bg-alt); border: 2px solid var(--danger); border-radius: 0.75rem; padding: 1.25rem; margin: 1rem 0; }
    .task-box h3 { color: var(--danger); margin-bottom: 0.75rem; }
    h4 { font-size: 0.9rem; margin: 1rem 0 0.5rem; font-weight: 600; color: var(--accent); }
    details { margin-top: 1rem; }
    summary { cursor: pointer; padding: 0.75rem 1rem; background: var(--bg-alt); border-radius: 0.5rem; font-weight: 500; color: var(--muted); list-style: none; display: flex; align-items: center; gap: 0.5rem; }
    summary::-webkit-details-marker { display: none; }
    summary::before { content: '▶'; font-size: 0.7rem; transition: transform 0.2s; }
    details[open] summary::before { transform: rotate(90deg); }
    summary:hover { background: var(--border); color: var(--text); }
    details.hint summary { color: var(--warning); }
    details.trap summary { color: var(--danger); }
    details.solution summary { color: var(--accent); font-weight: 600; }
    .hint-content { padding: 1rem; margin-top: 0.5rem; background: var(--warning-light); border-left: 3px solid var(--warning); border-radius: 0 0.5rem 0.5rem 0; }
    .trap-content { padding: 1rem; margin-top: 0.5rem; background: var(--danger-light); border-left: 3px solid var(--danger); border-radius: 0 0.5rem 0.5rem 0; }
    .trap-content strong { color: var(--danger); }
    .solution-content { padding: 1rem; margin-top: 0.5rem; background: var(--success-light); border-radius: 0.5rem; }
    .solution-content h4 { color: var(--success); }
    .scratch { font-family: monospace; background: var(--bg); padding: 1rem; border-radius: 0.5rem; white-space: pre-wrap; font-size: 0.8rem; margin: 0.5rem 0; }
    .theme-toggle { background: var(--card); border: 1px solid var(--border); border-radius: 2rem; padding: 0.5rem; cursor: pointer; }
    .nav-links { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
    .nav-links a { font-size: 0.8rem; }

    /* Form styles */
    .worksheet { background: var(--bg-alt); border: 1px solid var(--border); border-radius: 0.75rem; padding: 1.25rem; }
    .worksheet h4 { color: var(--text); margin-top: 0; border-bottom: 2px solid var(--accent); padding-bottom: 0.5rem; }
    .form-grid { display: grid; grid-template-columns: auto 1fr 1fr; gap: 0.5rem; align-items: center; margin: 0.75rem 0; }
    .form-grid label { font-size: 0.85rem; font-weight: 500; }
    .form-grid input { padding: 0.375rem 0.5rem; border: 1px solid var(--border); border-radius: 0.375rem; font-size: 0.85rem; background: var(--card); color: var(--text); width: 100%; }
    .species-table { width: 100%; margin: 0.75rem 0; }
    .species-table th, .species-table td { padding: 0.375rem 0.5rem; font-size: 0.8rem; }
    .species-table input { padding: 0.25rem 0.375rem; border: 1px solid var(--border); border-radius: 0.25rem; font-size: 0.8rem; background: var(--card); color: var(--text); width: 100%; }
    .species-table input[type="text"] { min-width: 80px; }
    .species-table input[type="number"] { width: 60px; }
    .sim-table { width: 100%; margin: 0.75rem 0; }
    .sim-table th, .sim-table td { padding: 0.375rem 0.5rem; font-size: 0.8rem; }
    .sim-table input { padding: 0.25rem 0.375rem; border: 1px solid var(--border); border-radius: 0.25rem; font-size: 0.8rem; background: var(--card); color: var(--text); }
    .sim-table .calc { display: flex; align-items: center; gap: 0.25rem; }
    .sim-table .calc input { width: 50px; text-align: center; }
    .sim-table .calc span { color: var(--muted); }
    .check-row { display: flex; align-items: center; gap: 0.5rem; margin: 0.5rem 0; font-size: 0.85rem; }
    .check-row input[type="checkbox"] { width: 1.1rem; height: 1.1rem; }
    .final-placement { display: grid; grid-template-columns: auto 1fr auto; gap: 0.5rem; align-items: center; margin: 0.75rem 0; max-width: 300px; }
    .final-placement label { font-size: 0.85rem; }
    .final-placement input { padding: 0.375rem 0.5rem; border: 1px solid var(--border); border-radius: 0.375rem; font-size: 0.85rem; background: var(--card); color: var(--text); width: 80px; text-align: center; }
    .final-placement span { font-size: 0.85rem; color: var(--muted); }
  </style>
</head>
<body>
  <div class="container">
    <div class="nav-links">
      <a href="index.html" class="btn btn-secondary">← Back to Trainer</a>
      <a href="example1.html" class="btn btn-secondary">Example 1</a>
      <a href="example2.html" class="btn btn-secondary">Example 2</a>
      <a href="example3.html" class="btn btn-secondary">Example 3</a>
    </div>

    <div class="header">
      <h1>Example 4 <span class="badge badge-mountain">Mountain</span> <span class="badge badge-hard">Hard</span></h1>
      <button class="theme-toggle" onclick="document.documentElement.setAttribute('data-theme', document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark')">Toggle Theme</button>
    </div>

    <div class="card">
      <h2>Problem Statement</h2>
      <p>Select <strong>8 species</strong> from the 15 available below. This is a challenging Red Rock/Mountain problem with tight elevation constraints and competitive apex predators.</p>

      <div class="task-box">
        <h3>Challenge</h3>
        <p>The producers have non-overlapping elevation ranges. You must choose which elevation band to target, then build a food chain that works within that narrow window. Multiple predators compete for limited prey.</p>
      </div>

      <details class="hint">
        <summary>Show Hint</summary>
        <div class="hint-content">
          Check elevation overlaps FIRST. Some producer combinations are impossible. The Wolf and Mountain Lion cannot both survive — pick one or neither.
        </div>
      </details>
    </div>

    <div class="card">
      <h2>Available Species</h2>
      <table>
        <thead>
          <tr>
            <th>Species</th>
            <th class="center">Type</th>
            <th class="center">Provided</th>
            <th class="center">Needed</th>
            <th class="center">Elevation (m)</th>
            <th class="center">Temp (°C)</th>
            <th>Eats</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Tundra Moss</strong></td><td class="center"><span class="producer">Producer</span></td><td class="center" style="color:var(--success);font-weight:600">2800</td><td class="center">—</td><td class="center">2500–3500</td><td class="center">-8–5</td><td>—</td></tr>
          <tr><td><strong>Alpine Sedge</strong></td><td class="center"><span class="producer">Producer</span></td><td class="center" style="color:var(--success);font-weight:600">3200</td><td class="center">—</td><td class="center">2200–3000</td><td class="center">-2–10</td><td>—</td></tr>
          <tr><td><strong>Mountain Willow</strong></td><td class="center"><span class="producer">Producer</span></td><td class="center" style="color:var(--success);font-weight:600">2500</td><td class="center">—</td><td class="center">1800–2600</td><td class="center">2–14</td><td>—</td></tr>
          <tr><td><strong>Spruce Forest</strong></td><td class="center"><span class="producer">Producer</span></td><td class="center" style="color:var(--success);font-weight:600">3500</td><td class="center">—</td><td class="center">1200–2200</td><td class="center">5–18</td><td>—</td></tr>
          <tr><td><strong>Lemming</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">450</td><td class="center" style="color:var(--warning)">300</td><td class="center">2400–3200</td><td class="center">-5–6</td><td>Tundra Moss, Alpine Sedge</td></tr>
          <tr><td><strong>Pika</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">500</td><td class="center" style="color:var(--warning)">350</td><td class="center">2200–3000</td><td class="center">-2–8</td><td>Alpine Sedge, Mountain Willow</td></tr>
          <tr><td><strong>Mountain Goat</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">900</td><td class="center" style="color:var(--warning)">700</td><td class="center">2000–3200</td><td class="center">-5–10</td><td>Alpine Sedge, Tundra Moss</td></tr>
          <tr><td><strong>Bighorn Sheep</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">950</td><td class="center" style="color:var(--warning)">750</td><td class="center">1800–2800</td><td class="center">0–12</td><td>Mountain Willow, Alpine Sedge</td></tr>
          <tr><td><strong>Elk</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1100</td><td class="center" style="color:var(--warning)">850</td><td class="center">1400–2400</td><td class="center">2–15</td><td>Mountain Willow, Spruce Forest</td></tr>
          <tr><td><strong>Marmot</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">600</td><td class="center" style="color:var(--warning)">450</td><td class="center">2000–2800</td><td class="center">0–10</td><td>Alpine Sedge, Mountain Willow</td></tr>
          <tr><td><strong>Ptarmigan</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">400</td><td class="center" style="color:var(--warning)">280</td><td class="center">2200–3200</td><td class="center">-5–8</td><td>Tundra Moss, Alpine Sedge</td></tr>
          <tr><td><strong>Red Fox</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">700</td><td class="center" style="color:var(--warning)">550</td><td class="center">1600–2600</td><td class="center">0–12</td><td>Lemming, Pika, Ptarmigan</td></tr>
          <tr><td><strong>Golden Eagle</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">800</td><td class="center" style="color:var(--warning)">650</td><td class="center">2000–3500</td><td class="center">-5–12</td><td>Marmot, Ptarmigan, Lemming</td></tr>
          <tr><td><strong>Mountain Lion</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1200</td><td class="center" style="color:var(--warning)">1000</td><td class="center">1400–2600</td><td class="center">0–14</td><td>Bighorn Sheep, Elk, Marmot</td></tr>
          <tr><td><strong>Wolf</strong></td><td class="center"><span class="consumer">Consumer</span></td><td class="center">1300</td><td class="center" style="color:var(--warning)">1100</td><td class="center">1200–2400</td><td class="center">-2–12</td><td>Elk, Bighorn Sheep, Mountain Goat</td></tr>
        </tbody>
      </table>
    </div>

    <div class="card">
      <h2>Critical Constraints</h2>

      <details class="trap">
        <summary>Trap: Elevation Conflict</summary>
        <div class="trap-content">
          <strong>Elevation Conflict:</strong> Tundra Moss (2500–3500m) doesn't overlap with Spruce Forest (1200–2200m). You cannot use both producers.
        </div>
      </details>

      <details class="trap">
        <summary>Trap: Wolf vs Mountain Lion</summary>
        <div class="trap-content">
          <strong>Wolf vs Mountain Lion:</strong> Wolf needs 1100 cal, Mountain Lion needs 1000. Their prey overlaps. If Wolf eats first (1300 Provided > 1200), it may consume Elk (1100) leaving Mountain Lion without enough food.
        </div>
      </details>

      <details class="trap">
        <summary>Trap: High-altitude chain</summary>
        <div class="trap-content">
          <strong>High-altitude chain:</strong> If you choose Tundra Moss zone (2500+ m), your only herbivores are Lemming, Pika, Mountain Goat, and Ptarmigan. That's only 4 consumers — you need 5 more species but options are limited.
        </div>
      </details>
    </div>

    <div class="card">
      <h2>Your Worksheet</h2>

      <div class="worksheet">
        <h4>Habitat Window</h4>
        <div class="form-grid">
          <label>Elevation (m)</label>
          <input type="number" placeholder="Min">
          <input type="number" placeholder="Max">
          <label>Temp (°C)</label>
          <input type="number" placeholder="Min">
          <input type="number" placeholder="Max">
        </div>
      </div>

      <div class="worksheet" style="margin-top: 1rem;">
        <h4>Selected Species (sorted by Calories Provided — highest first)</h4>
        <table class="species-table">
          <thead>
            <tr><th>#</th><th>Species Name</th><th>Provided</th><th>Needed</th><th>Eats</th></tr>
          </thead>
          <tbody>
            <tr><td>1</td><td><input type="text"></td><td><input type="number"></td><td><input type="text" placeholder="(producer)"></td><td><input type="text"></td></tr>
            <tr><td>2</td><td><input type="text"></td><td><input type="number"></td><td><input type="text" placeholder="(producer)"></td><td><input type="text"></td></tr>
            <tr><td>3</td><td><input type="text"></td><td><input type="number"></td><td><input type="number"></td><td><input type="text"></td></tr>
            <tr><td>4</td><td><input type="text"></td><td><input type="number"></td><td><input type="number"></td><td><input type="text"></td></tr>
            <tr><td>5</td><td><input type="text"></td><td><input type="number"></td><td><input type="number"></td><td><input type="text"></td></tr>
            <tr><td>6</td><td><input type="text"></td><td><input type="number"></td><td><input type="number"></td><td><input type="text"></td></tr>
            <tr><td>7</td><td><input type="text"></td><td><input type="number"></td><td><input type="number"></td><td><input type="text"></td></tr>
            <tr><td>8</td><td><input type="text"></td><td><input type="number"></td><td><input type="number"></td><td><input type="text"></td></tr>
          </tbody>
        </table>
      </div>

      <div class="worksheet" style="margin-top: 1rem;">
        <h4>Eating Simulation</h4>
        <p style="font-size: 0.8rem; color: var(--muted); margin-bottom: 0.5rem;">Walk through in order of Calories Provided (highest first):</p>
        <table class="sim-table">
          <thead>
            <tr><th>Eater</th><th>Eats</th><th>Food's Provided − Needed = Remaining</th></tr>
          </thead>
          <tbody>
            <tr><td><input type="text" style="width:100px"></td><td><input type="text" style="width:100px"></td><td><div class="calc"><input type="number"> <span>−</span> <input type="number"> <span>=</span> <input type="number"></div></td></tr>
            <tr><td><input type="text" style="width:100px"></td><td><input type="text" style="width:100px"></td><td><div class="calc"><input type="number"> <span>−</span> <input type="number"> <span>=</span> <input type="number"></div></td></tr>
            <tr><td><input type="text" style="width:100px"></td><td><input type="text" style="width:100px"></td><td><div class="calc"><input type="number"> <span>−</span> <input type="number"> <span>=</span> <input type="number"></div></td></tr>
            <tr><td><input type="text" style="width:100px"></td><td><input type="text" style="width:100px"></td><td><div class="calc"><input type="number"> <span>−</span> <input type="number"> <span>=</span> <input type="number"></div></td></tr>
            <tr><td><input type="text" style="width:100px"></td><td><input type="text" style="width:100px"></td><td><div class="calc"><input type="number"> <span>−</span> <input type="number"> <span>=</span> <input type="number"></div></td></tr>
            <tr><td><input type="text" style="width:100px"></td><td><input type="text" style="width:100px"></td><td><div class="calc"><input type="number"> <span>−</span> <input type="number"> <span>=</span> <input type="number"></div></td></tr>
          </tbody>
        </table>
      </div>

      <div class="worksheet" style="margin-top: 1rem;">
        <h4>Survival Check</h4>
        <div class="check-row"><input type="checkbox" id="check1"><label for="check1">All consumers' Needed met?</label></div>
        <div class="check-row"><input type="checkbox" id="check2"><label for="check2">All species' Provided > 0?</label></div>
      </div>

      <div class="worksheet" style="margin-top: 1rem;">
        <h4>Final Habitat Placement</h4>
        <p style="font-size: 0.8rem; color: var(--muted); margin-bottom: 0.5rem;">Pick middle of each range:</p>
        <div class="final-placement">
          <label>Elevation:</label><input type="number"><span>m</span>
          <label>Temp:</label><input type="number"><span>°C</span>
        </div>
      </div>

      <details class="solution" style="margin-top: 1.5rem;">
        <summary>Reveal Solution</summary>
        <div class="solution-content">
          <h4>Valid 8-Species Selection</h4>
          <p><strong>Spruce Forest, Alpine Sedge, Tundra Moss, Mountain Willow, Bighorn Sheep, Mountain Goat, Pika, Lemming</strong></p>

          <h4>Habitat Window</h4>
          <p>Elevation: 2500–3000m | Temp: -2–5°C</p>
          <p><strong>Place at: Elevation 2750m, Temp 2°C</strong></p>

          <h4>Why This Selection?</h4>
          <ul style="margin-left:1.5rem;margin-top:0.5rem">
            <li><strong>4 Producers:</strong> All four producers provide 12,000 total calories — massive buffer</li>
            <li><strong>No predators:</strong> Wolf (1100), Mountain Lion (1000), Golden Eagle (650), Red Fox (550) — ALL are traps that deplete prey</li>
            <li><strong>4 Herbivores:</strong> Bighorn Sheep, Mountain Goat, Pika, Lemming all eat directly from producers</li>
            <li><strong>Simple food chain:</strong> No mid-tier predation means no species gets consumed to 0</li>
          </ul>

          <h4>Eating Simulation</h4>
          <div class="scratch">Order (by Provided):
1. Spruce Forest (3500) — producer
2. Alpine Sedge (3200) — producer
3. Tundra Moss (2800) — producer
4. Mountain Willow (2500) — producer
5. Bighorn Sheep (950) eats Sedge: 3200−750=2450 ✓
6. Mountain Goat (900) eats Moss: 2800−700=2100 ✓
7. Pika (500) eats Willow: 2500−350=2150 ✓
8. Lemming (450) eats Sedge: 2450−300=2150 ✓

All 8 species survive — no predation issues.</div>

          <h4>Key Insight</h4>
          <p>This "hard" problem is actually solved most easily by <strong>avoiding all predators entirely</strong>. The trap is thinking you need predators to complete the food chain. With 4 producers providing 12,000 calories, 4 herbivores (total need: 2100 calories) easily survive. Every predator in this scenario risks killing its prey completely.</p>
        </div>
      </details>
    </div>
  </div>
</body>
</html>
